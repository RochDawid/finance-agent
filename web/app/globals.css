@import "tailwindcss";

@theme {
  --font-sans: "Plus Jakarta Sans", ui-sans-serif, system-ui, sans-serif;
  --font-mono: "JetBrains Mono", ui-monospace, monospace;

  /* Navy-based neutral scale */
  --color-navy-50:  #f0f4fb;
  --color-navy-100: #dce8f5;
  --color-navy-200: #c0d2e8;
  --color-navy-300: #8fafc8;
  --color-navy-400: #5e87a6;
  --color-navy-500: #3d6280;
  --color-navy-600: #2b4a66;
  --color-navy-700: #1e3350;
  --color-navy-750: #162840;
  --color-navy-800: #0f1e33;
  --color-navy-850: #0a1525;
  --color-navy-900: #070d1a;
  --color-navy-950: #040910;

  /* Semantic finance colors */
  --color-bullish:       #0fd494;
  --color-bullish-muted: color-mix(in oklch, #0fd494 14%, transparent);
  --color-bearish:       #f24040;
  --color-bearish-muted: color-mix(in oklch, #f24040 14%, transparent);
  --color-neutral:       #f0a020;
  --color-neutral-muted: color-mix(in oklch, #f0a020 14%, transparent);

  --color-long:  #0fd494;
  --color-short: #f24040;

  --color-confidence-low:       #f24040;
  --color-confidence-medium:    #f0a020;
  --color-confidence-high:      #0fd494;
  --color-confidence-very-high: #0fd4c0;

  /* Brand accent */
  --color-brand: #6366f1;
  --color-brand-hover: #818cf8;

  /* Animations */
  --animate-shimmer:        shimmer 2s linear infinite;
  --animate-progress-pulse: progress-pulse 1.4s ease-in-out infinite;
  --animate-spin-slow:      spin-slow 1.5s linear infinite;
  --animate-fade-in:        fade-in 0.2s ease-out;
  --animate-pulse-glow:     pulse-glow 2s ease-in-out infinite;
}

@custom-variant dark (&:is(.dark *));

/* ── Light theme ─────────────────────────────── */
:root {
  --background:         var(--color-navy-50);
  --foreground:         var(--color-navy-900);
  --card:               #ffffff;
  --card-foreground:    var(--color-navy-900);
  --border:             var(--color-navy-200);
  --muted:              var(--color-navy-100);
  --muted-foreground:   var(--color-navy-400);
  --accent:             var(--color-navy-100);
  --accent-foreground:  var(--color-navy-900);
  --ring:               var(--color-brand);
}

/* ── Dark theme ──────────────────────────────── */
.dark {
  --background:         #070d1a;
  --foreground:         var(--color-navy-100);
  --card:               #0d1423;
  --card-foreground:    var(--color-navy-100);
  --border:             var(--color-navy-800);
  --muted:              var(--color-navy-850);
  --muted-foreground:   var(--color-navy-400);
  --accent:             var(--color-navy-800);
  --accent-foreground:  var(--color-navy-100);
  --ring:               var(--color-brand);
}

/* ── Base ────────────────────────────────────── */
* {
  border-color: var(--border);
}

html {
  scroll-behavior: smooth;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-variant-numeric: tabular-nums;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Subtle dot grid texture on dark background */
.dark body {
  background-image: radial-gradient(
    circle,
    color-mix(in oklch, var(--color-navy-700) 30%, transparent) 1px,
    transparent 1px
  );
  background-size: 28px 28px;
}

/* ── Focus states ────────────────────────────── */
*:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
  border-radius: 4px;
}

/* ── Scrollbar ───────────────────────────────── */
::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: var(--color-navy-700);
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover { background: var(--color-navy-500); }

/* ── Skip link ───────────────────────────────── */
.skip-link {
  position: absolute;
  left: -9999px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}
.skip-link:focus {
  position: fixed;
  top: 0; left: 0;
  width: auto; height: auto;
  padding: 0.5rem 1rem;
  background: var(--background);
  color: var(--foreground);
  z-index: 100;
  border: 2px solid var(--ring);
}

/* ── Reduced motion ──────────────────────────── */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ── Keyframe animations ─────────────────────── */
@keyframes shimmer {
  0%   { background-position: -200% 0; }
  100% { background-position:  200% 0; }
}

@keyframes progress-pulse {
  0%, 80%, 100% { opacity: 0.25; transform: scale(0.75); }
  40%           { opacity: 1;    transform: scale(1);    }
}

@keyframes spin-slow {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

@keyframes fade-in {
  from { opacity: 0; }
  to   { opacity: 1; }
}

@keyframes slide-up {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0);   }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 0 0 color-mix(in oklch, var(--color-brand) 0%, transparent); }
  50%      { box-shadow: 0 0 0 4px color-mix(in oklch, var(--color-brand) 25%, transparent); }
}

/* ── Animation utility classes ───────────────── */
.animate-shimmer {
  background: linear-gradient(
    90deg,
    transparent 0%,
    var(--color-navy-200) 50%,
    transparent 100%
  );
  background-size: 200% 100%;
  animation: shimmer 2s linear infinite;
}
.dark .animate-shimmer {
  background: linear-gradient(
    90deg,
    transparent 0%,
    var(--color-navy-750) 50%,
    transparent 100%
  );
  background-size: 200% 100%;
  animation: shimmer 2s linear infinite;
}

.animate-progress-pulse { animation: progress-pulse 1.4s ease-in-out infinite; }
.animate-spin-slow       { animation: spin-slow 1.5s linear infinite; }
.animate-fade-in         { animation: fade-in 0.2s ease-out; }
.animate-pulse-glow      { animation: pulse-glow 2s ease-in-out infinite; }

/* ── Slide-in/fade-in from Radix (used by Toast, Select) ── */
.data-\[state\=open\]\:animate-in[data-state=open]       { animation: slide-up 0.2s ease-out; }
.data-\[state\=closed\]\:animate-out[data-state=closed]  { animation: fade-in 0.15s ease-out reverse; }

/* ── Sileo toast overrides ───────────────────── */
:root {
  /* Monochrome — all types share a single muted neutral tone;
     intent is communicated by the icon shape, not by color */
  --sileo-state-success: var(--muted-foreground);
  --sileo-state-error:   var(--muted-foreground);
  --sileo-state-warning: var(--muted-foreground);
  --sileo-state-info:    var(--muted-foreground);
  --sileo-state-action:  var(--muted-foreground);
}

/* Toast body — card surface, light/dark aware */
[data-sileo-canvas] path { fill: var(--card) !important; }

/* Title — foreground color for full legibility; no forced capitalize */
[data-sileo-title] {
  text-transform: none;
  font-weight: 600;
  --sileo-tone: var(--foreground);
}
